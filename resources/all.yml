ansible_user: cst8246
ansible_become: true
ansible_become_password: "cst8246"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸŒ Domain & Network Settings
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
domain_name: "example48.lab"                # Primary domain
domain_ex: "example48.lab"                  # Used by other roles (intentional duplicate)
domain_site: "site48.lab"                   # Secondary domain for DNS

srv_ip: "172.16.30.48"                      # Server IP
mailserver_ip: "{{ srv_ip }}"               # Alias for mail roles

cli_ip: "172.16.31.48"                      # Client IP
mailclient_ip: "{{ cli_ip }}"               # Alias for mail roles

alias_ip: "172.16.32.48"                    # LDAP host entry
ns2_ip: "172.16.31.48"                      # Used in DNS (same as cli_ip)

server_network: "172.16.30.0/24"
client_network: "172.16.31.0/24"
alias_network: "172.16.32.0/24"

internal_nets:
  - "172.16.30.0/24"
  - "172.16.31.0/24"
  - "172.16.0.0/24"
  - "172.16.32.0/24"

blocked_net: "172.16.32.0/24"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ” LDAP Settings
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ldap_domain: "example48.lab"
ldap_suffix: "dc=example48,dc=lab"
ldap_uri: "ldap://172.16.30.48"
ldap_bind_dn: "cn=Directory Manager"
ldap_bind_pw: "cst8246cst8246"  # Replace this with a secure password in production
postfix_mynetworks: "{{ '127.0.0.0/8 ' + internal_nets | join(' ') }}"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“§ Mail Server (Postfix & Dovecot)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
mailhost_ip: "172.16.0.1"  # Internal router or gateway

postfix_masquerade_domain: "{{ domain_name }}"
postfix_inet_interfaces: "127.0.0.1, {{ mailserver_ip }}"

dovecot_mail_location: "maildir:~/Maildir"
dovecot_disable_plaintext_auth: "no"
dovecot_auth_mechanisms: "plain login"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ‘¥ User Management
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
mail_users:
  - root
  - cst8246
  - desertblume
  - abc

desertblume_password_hash: "<provided-hash>"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸŒ Webmail (Roundcube)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
roundcube_version: "1.5.11"
roundcube_archive_url: "https://github.com/roundcube/roundcubemail/releases/download/{{ roundcube_version }}/roundcubemail-{{ roundcube_version }}-complete.tar.gz"
roundcube_install_dir: "/var/www/html/roundcube"
roundcube_web_alias: "/webmail"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ§­ DNS Zones
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
zones:
  - name: "{{ domain_name }}"
    file: "fwd.{{ domain_name }}"
  - name: "{{ domain_site }}"
    file: "fwd.{{ domain_site }}"
  - name: "16.172.in-addr.arpa"
    file: "named.16.172"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸŒ Common Ports
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
http_port: "80"
https_port: "443"


ldap_entries:
  - name: base
    dn: "dc=example48,dc=lab"
    ldif: "/root/base.ldif"

  - name: ou
    dn: "ou=accounts,dc=example48,dc=lab"
    ldif: "/root/ou.ldif"

  - name: users
    dn: "uid=linuser1,ou=accounts,dc=example48,dc=lab"
    ldif: "/root/users.ldif"

  - name: group
    dn: "cn=users,ou=groups,dc=example48,dc=lab"
    ldif: "/root/group.ldif"

  - name: hosts
    dn: "cn=happy.example48.lab,ou=hosts,dc=example48,dc=lab"
    ldif: "/root/hosts.ldif"

